function animate(){requestAnimationFrame(animate),render(),update()}function update(){planets.controls.update(planets.clock.getDelta()),planets.stats.update();var e=25e-6*Date.now();particleLight.position.x=300*Math.sin(5*e),particleLight.position.z=300*Math.cos(5*e),moon.rotation.z=300*Math.cos(.1*e),moon.position.x=800*Math.cos(5*e),moon.position.z=800*Math.sin(5*e),land.rotation.z=300*Math.cos(.005*e)}function render(){planets.renderer&&planets.renderer.render(planets.scene,planets.camera)}function initializeLesson(){planets.init(),animate()}var luna=new THREE.TextureLoader().load("moon.jpg");luna.wrapS=luna.wrapT=THREE.RepeatWrapping,luna.needsUpdate=!0;var land_texture=new THREE.TextureLoader().load("land.jpg");land_texture.wrapS=luna.wrapT=THREE.RepeatWrapping,land_texture.needsUpdate=!0;var normal=new THREE.TextureLoader().load("normal.jpg");normal.wrapS=normal.wrapT=THREE.RepeatWrapping,normal.needsUpdate=!0;var mlib={23:new THREE.MeshBasicMaterial({color:16777215}),moon:new THREE.MeshPhongMaterial({map:luna,emissive:2829354,bumpMap:normal}),land:new THREE.MeshPhongMaterial({map:land_texture,emissive:2829354})},particleLight,planets={scene:null,camera:null,renderer:null,container:null,controls:null,clock:null,stats:null,init:function(){this.scene=new THREE.Scene;var e=window.innerWidth,n=window.innerHeight,t=45,a=e/n,i=1,o=5e3;this.camera=new THREE.PerspectiveCamera(t,a,i,o),this.scene.add(this.camera),this.camera.position.set(1e3,3e3,1e3),this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!1}),this.renderer.setSize(e,n),this.renderer.setClearColor(0),this.renderer.shadowMapEnabled=!0,this.renderer.shadowMapSoft=!0,this.container=document.createElement("div"),document.body.appendChild(this.container),this.container.appendChild(this.renderer.domElement),THREEx.WindowResize(this.renderer,this.camera),this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.target=new THREE.Vector3(0,0,0),this.clock=new THREE.Clock,this.stats=new Stats,this.stats.domElement.style.position="absolute",this.stats.domElement.style.bottom="0px",this.stats.domElement.style.zIndex=10,this.container.appendChild(this.stats.domElement);var s=new THREE.DirectionalLight(16777215);s.position.set(1,800,1),s.castShadow=!0,s.shadowDarkness=.2,s.shadowMapWidth=s.shadowMapHeight=1e3,this.scene.add(s),particleLight=new THREE.Mesh(new THREE.SphereGeometry(10,10,10),new THREE.MeshBasicMaterial({color:3004017})),particleLight.position=s.position;var r=new THREE.SphereGeometry(100,100,20);moon=new THREE.Mesh(r,mlib.moon),moon.position.set(0,0,500),this.scene.add(moon);var l=new THREE.SphereGeometry(400,400,20);land=new THREE.Mesh(l,mlib.land),land.position.x=0,land.position.y=0,land.position.z=0,this.scene.add(land)}};window.addEventListener?window.addEventListener("load",initializeLesson,!1):window.attachEvent?window.attachEvent("onload",initializeLesson):window.onload=initializeLesson;